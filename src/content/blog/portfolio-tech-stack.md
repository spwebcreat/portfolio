---
title: "ポートフォリオサイトの技術構成と、こだわりすぎた話"
description: "Astro + Three.js + Tailwind + Stylus。興味本位で選んだ技術スタックでポートフォリオサイトを作ったら、想像以上にハマりポイントが多かった話。"
pubDate: 2026-02-19
category: tech
tags: [Astro, Three.js, Tailwind CSS, Stylus, React, ポートフォリオ]
draft: true
heroImage: "../../assets/img/blog/portfolio-tech-stack.jpg"
---

## はじめに

ブログをはじめたのをきっかけに、このサイトを作成したことについて書こうと思います。作成したのは、Githubの履歴を見ると約2年前。まだ生成AIも主流ではない頃でした。

そろそろサイトもリニューアルを考えているので、今のうちにこのサイトの技術スタックや、こだわりポイントについて振り返ってみようと思います。

## このサイトの技術スタック

このサイトは、以下の技術スタックで構築しています。

| カテゴリ | 技術スタック |
|----------|------|
| フレームワーク | Astro 4 + React |
| スタイル | Tailwind CSS 3 + Stylus |
| 3D | Three.js（react-three/fiber） |
| スムーススクロール | Lenis |
| デプロイ | GitHub Actions → FTP |

当時を振り返っても「なんでこの組み合わせ？」と思われるかもしれません...

正直、自分でもそう思います。


## なぜAstroを選んだか

理由はいたってシンプルで、**一度使ってみたかったから**。

またAstroの「[Islands Architecture](https://docs.astro.build/en/concepts/islands/)」というコンセプトに興味がありました。静的サイトをベースに、必要な部分だけReactやVueのコンポーネントを「島」のように配置できるという所に興味をもちました。ポートフォリオサイトなら大部分は静的コンテンツだし、3D表現の部分にReactを使うという構成は、試すにはちょうどいい題材かなぁと何となく思い立ちました。

実際に使ってみた所、SSGの高速さとReactコンポーネントの柔軟さを両立できるのは確かに便利で、当時実際に体感として理解できたのは大きかったです。

ただクライアントワークではまだまだWordPressの方が需要が多い印象ですが、要件によってはWEB制作でもAstroを選択肢に入れても良さそうな印象です。特に、**パフォーマンス重視で、かつ部分的に動的な要素が必要なサイト**にはAstroはかなりマッチすると思います。

多くのクライアントが使い慣れているWordpressをヘッドレスCMSとして使う構成も、Astroなら比較的スムーズに実装でそうです。

## 3Dのメインビジュアル：「自分の島」を作りたかった

Astroの「Islands Architecture」、つまり「アイランド＝島」。

ふと、**自分の島をを表現したら面白いんじゃないか**？という発想が当時突然浮かんだ気がします。

3D表現は取り入れようと決めていたので、3D素材を探していると、目を引いたモデルがあったので、それをスクロールと連動させて動かしてみたいと思いました。

どのように動かそうかと考えた所、ページをスクロールするたびに3Dオブジェクトが動き、サイト全体が1つの空間であるかのような表現を目指しました。

### こだわったポイント

ただ3Dモデルを置いてスクロールで動かすだけなら、そこまで難しくはないのですが、自分の思い描く様な動きの**バランス**を取るのに苦戦しました。

- **オブジェクトの倍率**: 大きすぎるとコンテンツの邪魔、小さすぎると存在感がない
- **回転の方向と速度**: やりすぎると画面酔いしそうだし、控えめすぎるとただの飾り
- **スクロールとの連動度合い**: 少し遅延させて慣性を持たせる

3D表現ってカメラから見たポジションから3D空間のオブジェクトがどう見えるかという概念を理解するのになかなか慣れなく、

ヤマカンで数値を何度も調整したりしてるうちに徐々に理解が進み、「グリグリ動く、ちょっとした気持ち良さ」を目指しました。

この辺りの感じ方は個人差があるので完全に自己満足の世界に浸っていました。

### .gltfファイルのサイズ問題

元データを`.glb`にまとめたら398MBになり、流石にヤバいと思い、「.glb圧縮」などで検索したりして、Node.jsで簡易的な圧縮ツールを自作し、

- Draco圧縮でメッシュを軽量化
- sharpでテクスチャ画像も圧縮

最終的に24.9MB（約94%削減）まで落とすことができました。

---

## Stylus + Tailwind：自己満足の極み

この構成は**相当馬鹿げている**と自負している。

StylusというCSSプリプロセッサを知ったばかりで使ってみたかった。でもTailwind CSSも使いたい。普通はどちらか一方を選ぶところを、「両方使えばいいじゃん」と突き進んだ結果がこの構成。

### ハマりどころ

Stylus内でTailwindの`@apply`を使う構成にしたが、設定周りが安定するまでエラーとの格闘が続いた。

たとえば、StylusではCSS記法のいくつかが別の意味で解釈されてしまう：

- `/` が除算として解釈される → `aspect-ratio`系の`@apply`が使えない
- `:` がプロパティ区切りとして解釈される → `hover:opacity-80`のようなコロン付きユーティリティが使えない

結局、Tailwindの擬似クラス系ユーティリティは`@apply`では使わず、Stylusのネスト記法（`&:hover`）と組み合わせるルールに落ち着いた。

正直、最初からTailwind一本で書いた方が楽だったと思う。でも、**両方の書き心地を体感できた**ことに価値があったと思うことにしている。

---

## 地味に手こずったGTM設定

Google Tag Manager（GTM）の導入も、予想以上に手間がかかった。

AstroにはPartytownというWebWorkerベースのスクリプト実行の仕組みがあり、GTMをメインスレッドから分離してパフォーマンスを維持できる。ただ、PartyTown経由でGTMを動かす設定が一筋縄ではいかず、アナリティクスが正しく計測されるまで試行錯誤があった。

---

## ブログ機能の追加とClaude Code

ポートフォリオサイトとしてはWorksとProjectsのセクションで十分機能していたが、ずっとブログを書きたいと思いつつ手をつけられずにいた。

ブログ機能の構築からは**Claude Code**を使って開発を進めた。Astro Content Collectionsを使ったMarkdownベースのブログ構成、カテゴリやタグのフィルタリング、OGP対応など、Claude Codeとの対話で設計・実装を進められたことで、想像以上にスムーズに形になった。

また、ブログ構築をきっかけに既存サイトの細かい調整もClaude Codeに手伝ってもらった。これまで「気になってたけど後回しにしていた」部分を一気に片付けられたのはありがたかった。

---

## サイト全体の構成

参考までに、現在のサイト構成を紹介する。

### ページ構成

1. **MainVisual** — Three.jsの3Dビジュアル（スクロール連動）
2. **About** — 自己紹介
3. **Projects** — 自主制作プロジェクト（AI画像生成アプリ、当サイト、WP管理ポータル）
4. **Works** — クライアント制作実績（掲載許可管理付き）
5. **Blogs** — 技術記事・制作ノウハウ

### デプロイ

GitHub Actionsで`main`ブランチにpushすると自動でビルド→FTPデプロイ。手動でのファイルアップロードは不要。

### ブログの仕組み

| 項目 | 内容 |
|------|------|
| データソース | Markdown（Astro Content Collections） |
| カテゴリ | Tech（水色）/ Knowledge（赤）/ Diary（緑） |
| URL構造 | `/blog/[slug]` |
| 記事追加 | `.md`ファイルを追加するだけ |

将来的にはヘッドレスCMSへの移行も検討しているが、Markdownベースで始めたことで「まず書く」ハードルは下がった。

---

## まとめ：興味本位で選んで、こだわりすぎた

振り返ると、技術選定の理由はほぼ「使ってみたかったから」に集約される。

- Astro → 話題だから触りたかった
- Three.js → 「自分の島」を作りたかった
- Stylus + Tailwind → 両方使いたかった
- Claude Code → ブログ構築で試したかった

効率だけを考えたら、もっとシンプルな構成にすべきだったかもしれない。でも、自分のポートフォリオサイトくらい好きにやらせてほしい。

実際、この「興味本位で全部やってみる」スタンスのおかげで、各技術の長所と短所を体感として理解できた。クライアントワークでは「この案件にはこの構成が最適」と判断する材料になっている。

自分のサイトは、一番自由に実験できる場所。こだわりすぎたことに後悔はない。
