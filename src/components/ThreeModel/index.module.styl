.canvasModel
  position fixed
  width 100%
  height 100%
  top: 0
  left: 0
  z-index 1
  background #000

// --- Glitch Loading Screen ---
.loadingGlitch
  position fixed
  top 0
  left 0
  width 100%
  height 100%
  z-index 200
  background #000
  display flex
  flex-direction column
  align-items center
  justify-content center
  gap 32px
  transition opacity 0.6s ease-out
  &.glitchFading
    opacity 0
    pointer-events none

.scanlines
  position absolute
  top 0
  left 0
  width 100%
  height 100%
  pointer-events none
  z-index 1
  background repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 229, 255, 0.03) 2px, rgba(0, 229, 255, 0.03) 4px)
  transition opacity 0.5s ease

.glitchWrapper
  position relative
  z-index 2

.glitchText
  font-family 'Montserrat', sans-serif
  font-size clamp(24px, 6vw, 72px)
  font-weight 900
  color #FFFFFF
  letter-spacing 3px
  position relative
  text-shadow 0 0 10px rgba(255, 255, 255, 0.5)
  margin 0
  // Glitch pseudo-layers
  &::before
  &::after
    content attr(data-text)
    position absolute
    top 0
    left 0
    width 100%
    height 100%
    pointer-events none
  &::before
    color #ff0040
    opacity var(--glitch-intensity, 0)
    animation glitch-layer-1 0.3s infinite linear alternate-reverse
  &::after
    color #00e5ff
    opacity var(--glitch-intensity, 0)
    animation glitch-layer-2 0.25s infinite linear alternate-reverse
  // Clean state — no glitch, bright glow
  &.glitchClean
    text-shadow 0 0 20px rgba(0, 229, 255, 0.8), 0 0 60px rgba(0, 229, 255, 0.3)
    &::before
    &::after
      display none

.glitchProgress
  position relative
  z-index 2
  display flex
  align-items center
  gap 12px

.glitchTrack
  width 200px
  height 2px
  background rgba(255, 255, 255, 0.1)
  border-radius 1px
  overflow hidden

.glitchFill
  height 100%
  background #00e5ff
  border-radius 1px
  box-shadow 0 0 8px rgba(0, 229, 255, 0.5)
  transition width 0.15s ease

.glitchNum
  color rgba(0, 229, 255, 0.7)
  font-family 'Montserrat', sans-serif
  font-size 13px
  font-weight 600
  letter-spacing 1px
  min-width 40px

@keyframes glitch-layer-1
  0%
    clip-path inset(40% 0 61% 0)
    transform translate(-3px, -1px)
  20%
    clip-path inset(92% 0 1% 0)
    transform translate(2px, 1px)
  40%
    clip-path inset(10% 0 70% 0)
    transform translate(-1px, 2px)
  60%
    clip-path inset(55% 0 30% 0)
    transform translate(3px, -1px)
  80%
    clip-path inset(75% 0 5% 0)
    transform translate(-2px, 0)
  100%
    clip-path inset(20% 0 55% 0)
    transform translate(1px, 1px)

@keyframes glitch-layer-2
  0%
    clip-path inset(65% 0 10% 0)
    transform translate(2px, 1px)
  25%
    clip-path inset(5% 0 80% 0)
    transform translate(-1px, -2px)
  50%
    clip-path inset(45% 0 40% 0)
    transform translate(1px, 2px)
  75%
    clip-path inset(80% 0 2% 0)
    transform translate(-3px, 0)
  100%
    clip-path inset(30% 0 50% 0)
    transform translate(2px, -1px)

.fogOverlay
  position fixed
  top 0
  left 0
  width 100%
  height 100%
  z-index 199
  background radial-gradient(ellipse at center, rgba(176, 232, 255, 0.6) 0%, rgba(0, 0, 0, 0.8) 100%)
  transition opacity 2s ease-out
  pointer-events none
  &.clear
    opacity 0

// --- Crystal Label (常時表示) ---
.crystalLabel
  font-family 'Montserrat', sans-serif
  font-size 11px
  font-weight 600
  color #b0e8ff
  text-shadow 0 0 6px rgba(0, 229, 255, 0.4)
  white-space nowrap
  letter-spacing 0.5px
  transition color 0.3s, text-shadow 0.3s
  &[data-active]
    color #00e5ff
    text-shadow 0 0 12px rgba(0, 229, 255, 0.8), 0 0 24px rgba(0, 229, 255, 0.3)

// --- Detail Panel (2D overlay — 下からスライドアップ、PC/SP共通) ---
.detailPanel
  position fixed
  bottom 0
  left 0
  right 0
  width 100%
  height auto
  max-height 50vh
  z-index 50
  background transparent
  backdrop-filter blur(16px)
  border-top 1px solid rgba(0, 229, 255, 0.15)
  border-radius 16px 16px 0 0
  transform translateY(100%)
  transition transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)
  display flex
  flex-direction column
  padding 24px 20px
  overflow-y auto
  &.open
    transform translateY(0)

.panelClose
  position absolute
  top 12px
  right 12px
  width 36px
  height 36px
  border-radius 50%
  border 1px solid rgba(0, 229, 255, 0.3)
  background rgba(0, 229, 255, 0.05)
  color #b0e8ff
  font-size 18px
  cursor pointer
  display flex
  align-items center
  justify-content center
  transition background 0.2s, border-color 0.2s
  &:hover
    background rgba(0, 229, 255, 0.15)
    border-color rgba(0, 229, 255, 0.5)

.panelTitle
  color #00e5ff
  font-family 'Montserrat', sans-serif
  font-size 20px
  font-weight 700
  margin 0 0 12px

.panelDesc
  color #c8e6f0
  font-size 14px
  line-height 1.7
  margin 0 0 20px

.panelTags
  display flex
  flex-wrap wrap
  gap 6px

.panelTag
  display inline-block
  background rgba(0, 229, 255, 0.08)
  border 1px solid rgba(0, 229, 255, 0.25)
  border-radius 4px
  padding 4px 10px
  font-size 12px
  color #b0e8ff
  font-family 'Montserrat', sans-serif

// --- Time Toggle ---
.timeToggle
  position fixed
  bottom 16px
  right 16px
  z-index 500
  padding 6px 12px
  border-radius 6px
  border 1px solid rgba(255, 255, 255, 0.2)
  background rgba(0, 0, 0, 0.6)
  color rgba(255, 255, 255, 0.5)
  font-family 'Montserrat', sans-serif
  font-size 11px
  cursor pointer
  backdrop-filter blur(8px)
  transition background 0.2s, border-color 0.2s, color 0.2s
  &[data-active]
    border-color rgba(0, 229, 255, 0.4)
    color #00e5ff
  &:hover
    background rgba(0, 229, 255, 0.1)

